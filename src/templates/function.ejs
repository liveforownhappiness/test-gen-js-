<%
const sourceImport = helpers.getRelativeImport(analysis.filePath.replace(/\.(tsx?|jsx?)$/, '.test.$1'), analysis.filePath);
const isVitest = options.testRunner === 'vitest';
const mockFn = isVitest ? 'vi.fn()' : 'jest.fn()';
const clearMocks = isVitest ? 'vi.clearAllMocks()' : 'jest.clearAllMocks()';
const spyOn = isVitest ? 'vi.spyOn' : 'jest.spyOn';
%>
/* eslint-disable @typescript-eslint/no-unused-vars */
<% if (isVitest) { %>
import { describe, it, expect, vi, beforeEach } from 'vitest';
<% } %>
<% analysis.functions.forEach(func => { %>
import { <%= func.name %> } from '<%= sourceImport %>';
<% }); %>

<% analysis.functions.forEach(func => { %>
describe('<%= func.name %>', () => {
  beforeEach(() => {
    <%- clearMocks %>;
  });

<% if (func.isAsync) { %>
  it('should resolve successfully', async () => {
    const result = await <%- func.name %>(<%- func.params.map(p => helpers.generateMockValue(p.type)).join(', ') %>);
    
    // TODO: Add assertions
    expect(result).toBeDefined();
  });

  it('should handle errors gracefully', async () => {
    // TODO: Mock error scenario
    // Example:
    // <%- spyOn %>(someModule, 'someMethod').mockRejectedValue(new Error('Test error'));
    // await expect(<%= func.name %>()).rejects.toThrow('Test error');
  });
<% } else { %>
  it('should return expected result', () => {
    const result = <%- func.name %>(<%- func.params.map(p => helpers.generateMockValue(p.type)).join(', ') %>);
    
    // TODO: Add assertions
    expect(result).toBeDefined();
  });

  it('should handle edge cases', () => {
    // TODO: Test with edge case values
    // Example: empty strings, zero, null, undefined, etc.
  });
<% } %>

<% func.params.forEach(param => { %>
  describe('<%= param.name %> parameter', () => {
    it('should handle valid <%= param.name %>', () => {
      // TODO: Test with valid <%= param.name %> values
    });

<% if (!param.optional) { %>
    it('should handle missing <%= param.name %>', () => {
      // TODO: Test behavior when <%= param.name %> is missing
    });
<% } %>
  });

<% }); %>
});

<% }); %>
